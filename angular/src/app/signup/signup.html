<div class="page">
  <div class="overlay"></div>

  <div class="card">
    <h1 class="title">Create Account</h1>
    <p class="subtitle">Join the platform and get started in minutes.</p>

    <form [formGroup]="signupForm" (ngSubmit)="submit()" novalidate>
      <!-- Name -->
      <div class="field" [class.error]="f['name'].touched && f['name'].invalid">
        <label>Name</label>
        <input type="text" formControlName="name" placeholder="Enter your full name" />
        <div class="error-text" *ngIf="f['name'].touched && f['name'].hasError('required')">
          Name is required.
        </div>
        <div class="error-text" *ngIf="f['name'].touched && f['name'].hasError('minlength')">
          Minimum 2 characters.
        </div>
      </div>

      <!-- Username -->
      <div class="field" [class.error]="f['username'].touched && f['username'].invalid">
        <label>Username</label>
        <input type="text" formControlName="username" placeholder="Unique username" />
        <div class="error-text" *ngIf="f['username'].touched && f['username'].hasError('required')">
          Username is required.
        </div>
        <div class="error-text" *ngIf="f['username'].touched && f['username'].hasError('minlength')">
          Minimum 4 characters.
        </div>
      </div>

      <!-- Password -->
      <div class="field" [class.error]="f['password'].touched && f['password'].invalid">
        <label>Password</label>
        <input type="password" formControlName="password" placeholder="Create a strong password" />
        <div class="error-text" *ngIf="f['password'].touched && f['password'].hasError('required')">
          Password is required.
        </div>
        <div class="error-text" *ngIf="f['password'].touched && f['password'].hasError('minlength')">
          Minimum 6 characters.
        </div>
      </div>

      <!-- Email -->
      <div class="field" [class.error]="f['email'].touched && f['email'].invalid">
        <label>Email</label>
        <input type="email" formControlName="email" placeholder="you@example.com" />
        <div class="error-text" *ngIf="f['email'].touched && f['email'].hasError('required')">
          Email is required.
        </div>
        <div class="error-text" *ngIf="f['email'].touched && f['email'].hasError('email')">
          Enter a valid email.
        </div>
      </div>

      <!-- Phone -->
      <div class="field" [class.error]="f['phone'].touched && f['phone'].invalid">
        <label>Phone</label>
        <input type="tel" formControlName="phone" placeholder="10-digit mobile number" />
        <div class="error-text" *ngIf="f['phone'].touched && f['phone'].hasError('required')">
          Phone is required.
        </div>
        <div class="error-text" *ngIf="f['phone'].touched && f['phone'].hasError('pattern')">
          Enter a valid 10-digit number.
        </div>
      </div>

      <!-- Role -->
      <div class="field" [class.error]="f['role'].touched && f['role'].invalid">
        <label>Role</label>
        <select formControlName="role">
          <option value="USER">user</option>
          <option value="VENDOR">vendor</option>
        </select>
        <div class="error-text" *ngIf="f['role'].touched && f['role'].hasError('required')">
          Role is required.
        </div>
      </div>

      <!-- Server message -->
      <div
        *ngIf="serverMessage"
        [class.error-banner]="serverError"
        [class.success-banner]="!serverError"
      >
        {{ serverMessage }}
      </div>

      <button type="submit" [disabled]="loading || signupForm.invalid">
        <span *ngIf="!loading">Create account</span>
        <span *ngIf="loading" class="spinner"></span>
      </button>

      <p class="footnote">
        By signing up, you agree to our <a href="#">Terms</a> and
        <a href="#">Privacy Policy</a>.
      </p>
    </form>
  </div>
</div>
